# Описание структуры проекта сервисов 

Frontend лежит в директории front, Backend в директории back. В каждой существует Dockerfile, на основе которого происходит билд в docker compose. В docker compose также запускается postgres и nginx



# Архитектурная документация API

## Общее описание
API предоставляет функционал для системы обмена книгами, включая:
- Аутентификацию и авторизацию пользователей.
- Управление предложениями книг (добавление, редактирование, удаление).
- Управление обменами книгами (создание, просмотр, удаление).
- Управление точками обмена (добавление, редактирование, удаление).

---

## Сервисы и их взаимодействие

### 1. Сервис аутентификации и авторизации
#### Описание
Этот сервис отвечает за аутентификацию пользователей, выдачу токенов и управление сессиями.

#### Эндпоинты
- **POST `/api/v1/auth/jwt/login`**  
  Аутентификация пользователя. Возвращает JWT-токен для доступа к защищенным ресурсам.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет логин и пароль через защищенную форму.
  - Сервер возвращает токен, который фронтенд сохраняет (например, в localStorage) и использует для последующих запросов.

- **POST `/api/v1/auth/jwt/logout`**  
  Завершение сессии пользователя.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с токеном.
  - Сервер удаляет токен, и фронтенд очищает его из хранилища.

- **POST `/api/v1/auth/register`**  
  Регистрация нового пользователя.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет данные пользователя (email, пароль, имя, номер телефона и контактную информацию).
  - Сервер создает нового пользователя и возвращает его данные.

---

### 2. Сервис управления пользователями
#### Описание
Этот сервис позволяет управлять данными пользователей:

#### Эндпоинты
- **GET `/api/v1/users/me`**  
  Получение данных текущего пользователя.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с токеном.
  - Сервер возвращает данные пользователя.


- **GET `/api/v1/users/get_user/{user_id}`**  
  Получение данных пользователя по ID.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с токеном и ID пользователя.
  - Сервер возвращает данные пользователя.

---

### 3. Сервис управления предложениями книг
#### Описание
Этот сервис позволяет управлять предложениями книг: добавлять, редактировать, удалять и просматривать предложения.

#### Эндпоинты
- **GET `/api/v1/book-offer`**  
  Получение списка предложений книг с пагинацией.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с параметрами пагинации (страница, размер страницы).
  - Сервер возвращает список предложений.

- **POST `/api/v1/book-offer`**  
  Добавление нового предложения книги.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет данные книги (название, автор, год издания и т.д.) и изображение.
  - Сервер создает новое предложение и возвращает его данные.

- **GET `/api/v1/book-offer/{bookId}`**  
  Получение предложения книги по ID.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с ID книги.
  - Сервер возвращает данные предложения.

- **PATCH `/api/v1/book-offer/{bookId}`**  
  Обновление предложения книги.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет обновленные данные.
  - Сервер обновляет предложение и возвращает обновленные данные.

- **DELETE `/api/v1/book-offer/{bookId}`**  
  Удаление предложения книги.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с ID книги.
  - Сервер удаляет предложение.

---

### 4. Сервис управления обменами книгами
#### Описание
Этот сервис позволяет управлять обменами книгами: создавать, просматривать и удалять обмены.

#### Эндпоинты
- **GET `/api/v1/book-exchanges`**  
  Получение списка всех обменов.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с токеном.
  - Сервер возвращает список обменов.

- **POST `/api/v1/book-exchanges`**  
  Создание нового обмена.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет данные обмена (ID книги, ID пользователя-инициатора).
  - Сервер создает новый обмен и возвращает его данные.

- **DELETE `/api/v1/book-exchanges/{bookExchangeId}`**  
  Удаление обмена.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с ID обмена.
  - Сервер удаляет обмен.

---

### 5. Сервис управления точками обмена
#### Описание
Этот сервис позволяет управлять точками обмена: добавлять, редактировать, удалять и просматривать точки.

#### Эндпоинты
- **GET `/api/v1/points`**  
  Получение списка всех точек обмена.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос.
  - Сервер возвращает список точек.

- **POST `/api/v1/points`**  
  Добавление новой точки обмена.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет данные точки (город, место).
  - Сервер создает новую точку и возвращает ее данные.

- **DELETE `/api/v1/points/{pointId}`**  
  Удаление точки обмена.  
  **Взаимодействие с фронтендом:**  
  - Фронтенд отправляет запрос с ID точки.
  - Сервер удаляет точку.

---

## Взаимодействие сервисов между собой
1. **Аутентификация и авторизация:**  
   Все сервисы используют токены, выданные сервисом аутентификации, для проверки доступа к защищенным ресурсам.

2. **Управление пользователями и предложениями книг:**  
   Сервис предложений книг использует данные пользователей (например, ID создателя) для связывания предложений с конкретными пользователями.

3. **Управление обменами и точками обмена:**  
   Сервис обменов использует данные предложений книг и точек обмена для создания связей между книгами, пользователями и местами обмена.

